{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"umd_module.js","sourcesContent":["import { NotImplementedError } from \"ng-harmony-log\";\n\nexport class Harmony {\n\tconstructor (...args) {\n\t\tfor (let [i, injectee] of this.constructor.$inject.entries()) {\n\t\t\tthis[injectee] = args[i];\n\t\t}\n\t\tthis._constructedTimestamp = (new Date()).getTime();\n\t}\n\n\tget LISTENERS () {\n\t\tif (this._isEmpty(this._LISTENERS)) {\n\t\t\tthis._LISTENERS = [];\n\t\t}\n\t\treturn this._LISTENERS;\n\t}\n\tset LISTENERS (o) {\n\t\tlet _o = o;\n\t\tif (!Array.isArray(o)) {\n\t\t\t_o = [o];\n\t\t}\n\t\tfor (let [i, l] of _o.entries()) {\n\t\t\tthis._LISTENERS.push(l.name.id, {\n\t\t\t\tctx: l.ctx,\n\t\t\t\tname: l.name.fn,\n\t\t\t\tcreatedAt: l.name.ts,\n\t\t\t\tel: l.el || null\n\t\t\t})\n\t\t}\n\t}\n\tstatic get LISTENERS () {\n\t\treturn this._LISTENERS || [];\n\t}\n\tstatic set LISTENERS (transientMap) {\n\t\tthis._LISTENERS = transientMap;\n\t}\n\n\t_noop () {\n\t\t;\n\t}\n\tget _random () {\n\t\tif (this._isEmpty(this.__random)) {\n\t\t\tthis.__random = (Math.random() / this._constructedTimestamp).toString(36).slice(-7);\n\t\t}\n\t\treturn this.__random;\n\t}\n\t_validate (fn) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tresolve(fn());\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(e);\n\t\t\t\treject(e);\n\t\t\t}\n\t\t});\n\t}\n\t_isEmpty (tested) {\n\t\treturn (typeof tested === \"undefined\" || tested === null);\n\t}\n\t_isFunction (foo) {\n\t\treturn (typeof foo === \"function\");\n\t}\n\t_isPromise (foo) {\n\t\treturn !this._isEmpty(foo) && this._isFunction(foo.then);\n\t}\n\t_isFalsy (foo) {\n\t\treturn (this._isEmpty(foo) || foo instanceof Error);\n\t}\n\t_closurize (fn, ctx, ...args) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._validate(fn.bind(ctx, ...args))\n\t\t\t\t.then((...args) => {\n\t\t\t\t\tif (this._isPromise(args[0])) {\n\t\t\t\t\t\tretVal\n\t\t\t\t\t\t\t.then(resolve.bind(ctx))\n\t\t\t\t\t\t\t.catch(reject.bind(ctx));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (args.length > 1 || args[0] && !(args[0] instanceof Error)) {\n\t\t\t\t\t\t\tresolve.call(ctx, ...args);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject.call(ctx, ...args || null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\tget _name () {\n\t\treturn `${this.constructor.name}::${this._constructedTimestamp}::${this._random}`;\n\t}\n\t_parseName (name) {\n\t\tlet _name = name.split(\"::\");\n\t\treturn {\n\t\t\tfn: _name[0],\n\t\t\tts: _name[1],\n\t\t\tid: _name[2]\n\t\t}\n\t}\n\tget _parsedName () {\n\t\treturn this._parsedName(this._name);\n\t}\n\titerate (o) {\n\t\treturn (function* (_o) {\n\t\t\tfor (let [i, key] of Object.getOwnPropertyNames(_o).entries()) {\n\t\t\t\tyield [key, _o[key]];\n\t\t\t}\n\t\t})(o);\n\t}\n\tstatic iterate (o) {\n\t\treturn (function* (_o) {\n\t\t\tfor (let [i, key] of Object.getOwnPropertyNames(_o).entries()) {\n\t\t\t\tyield [key, _o[key]];\n\t\t\t}\n\t\t})(o);\n\t}\n\tstatic get $inject () {\n\t\treturn this._$inject || [];\n\t}\n\tstatic set $inject (injectees) {\n\t\tlet _injectees = [];\n\t\tif (!Array.isArray(injectees)) {\n\t\t\tinjectees = [injectees];\n\t\t}\n\t\tfor (let [i, injecteeStr] of injectees.entries()) {\n\t\t\tlet truthy = true;\n\t\t\tfor (let [j, _injecteeStr] of this.$inject.entries()) {\n\t\t\t\tif (injecteeStr === _injecteeStr) {\n\t\t\t\t\ttruthy = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (truthy) {\n\t\t\t\tif(injecteeStr.charAt(0) !== \"-\") {\n\t\t\t\t\t_injectees.push(injecteeStr);\n\t\t\t\t} else {\n\t\t\t\t\tlet j = this.$inject.indexOf(injecteeStr.slice(1));\n\t\t\t\t\tif (!!~j) {\n\t\t\t\t\t\tthis._$inject.splice(j, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis._$inject = this.$inject.concat(_injectees);\n\t}\n\tstatic set $register (descriptor) {\n\t\tfor (let [module, klass] of Harmony.iterate(descriptor)) {\n\t\t\tangular.module(module)[klass.type](klass.name, this);\n\t\t}\n\t}\n\tstatic mixin (...mixins) {\n\t\tfor (let [i, mixin] of mixins.entries()) {\n\t\t\tfor (let [k, v] of Harmony.iterate(mixin)) {\n\t\t\t\t(this.prototype[k] === null || typeof this.prototype[k] === \"undefined\") &&\n\t\t\t\tObject.defineProperty(this.prototype, k, {\n\t\t\t\t\tvalue: v,\n\t\t\t\t\tenumerable: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tstatic implement (...interfaces) {\n\t\tfor (let [i, Interface] of interfaces.entries()) {\n\t\t\tfor (let [k, v] of Harmony.iterate(Interface)) {\n\t\t\t\t(this.prototype[k] === null || typeof this.prototype[k] === \"undefined\") &&\n\t\t\t\tObject.defineProperty(this.prototype, k, {\n\t\t\t\t\tvalue: () => { throw new NotImplementedError(k); },\n\t\t\t\t\tenumerable: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\ttoString () {\n\t\treturn this.name || super.toString().match(/function\\s*(.*?)\\(/)[1];\n\t}\n}\nexport class Controller extends Harmony {\n\tconstructor (...args) {\n\t\tsuper(...args);\n\t\tfor (let [key, fn] of this.iterate(this.constructor.prototype)) {\n\t\t\tif (typeof fn === \"function\" &&\n\t\t\t\tkey[0] === \"$\") {\n\t\t\t\tthis.$scope[key.slice(1)] = this.$scope[key] = (...args) => {\n\t\t\t\t\treturn fn.apply(this, args);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\tstatic set $register(descriptor) {\n\t\tfor (let [module, klass] of Harmony.iterate(descriptor)) {\n\t\t\tangular.module(module).controller(klass.name, this);\n\t\t};\n\t}\n\tdigest () {\n\t\ttry { this.$scope.$digest(); }\n\t\tcatch (ngEx) { \"noop\"; }\n\t}\n}\nController.$inject = \"$scope\";\nexport class Service extends Harmony {\n\tstatic set $register(descriptor) {\n\t\tfor (let [module, klass] of Harmony.iterate(descriptor)) {\n\t\t\tangular.module(module)[klass.type || \"service\"](klass.name, this);\n\t\t}\n\t}\n}\nService.$inject = \"$http\";"]}